---
import "../styles/global.css";

interface Props {
  title?: string;
  description?: string;
}

const {
  title = "Dharma Putra Maritime - Excellence in Maritime Services",
  description = "Mitra terpercaya manajemen kapal, crewing, dan agency pelabuhan di Indonesia.",
} = Astro.props;

// Use import.meta.env.BASE_URL which is automatically populated by Astro
// and ensures compatibility with GitHub Pages sub-directories.
const basePath = import.meta.env.BASE_URL === '/' ? '' : import.meta.env.BASE_URL.replace(/\/$/, '');
---

<!doctype html>
<html lang="id" class="scroll-smooth selection:bg-brand-gold/30 selection:text-brand-900">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#0a192f" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
      rel="stylesheet"
    />

    <link rel="canonical" href="https://dharmaputramaritime.co.id/" />
    <link rel="icon" type="image/svg+xml" href={`${basePath}/favicon.svg`} />
    <link rel="manifest" href={`${basePath}/manifest.json`} />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content="https://dharmaputramaritime.co.id/" />
    <meta property="og:image" content="https://dharmaputramaritime.co.id/assets/images/og-image.jpg" />
    <meta property="og:site_name" content="Dharma Putra Maritime" />
    <meta property="og:locale" content="id_ID" />

    <!-- Font Awesome Official CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- AOS from local assets -->
    <link rel="stylesheet" href={`${basePath}/assets/css/aos.css`} />

    <style is:global>
      :root {
        --brand-gold: #c5a059;
        --brand-navy: #0a192f;
      }

      .text-gradient-gold {
        background: linear-gradient(135deg, #dac286 0%, #c5a059 50%, #936838 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .glass-morphism {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .hero-mask {
        mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f8fafc;
      }
      ::-webkit-scrollbar-thumb {
        background: var(--brand-navy);
        border-radius: 100px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: var(--brand-gold);
      }

      /* AOS tweak for smoother reveals */
      [data-aos] {
        pointer-events: none;
      }
      .aos-animate {
        pointer-events: auto;
      }
    </style>
  </head>

  <body class="font-sans text-slate-700 antialiased bg-slate-50 overflow-x-hidden">
    <!-- Progress Bar -->
    <div id="scroll-progress" class="fixed top-0 left-0 h-1 bg-brand-gold z-[100] transition-all duration-150 w-0"></div>

    <div id="app" class="relative">
      <slot />
    </div>

    <!-- Scripts -->
    <script is:inline src={`${import.meta.env.BASE_URL}/assets/js/aos.js`}></script>
    <script is:inline>
      // Initialize AOS
      document.addEventListener('DOMContentLoaded', () => {
        if (typeof AOS !== 'undefined') {
          AOS.init({
            duration: 1000,
            once: true,
            offset: 100,
            easing: 'ease-out-cubic'
          });
        }

        // Scroll progress indicator
        window.addEventListener('scroll', () => {
          const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
          const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
          const scrolled = (winScroll / height) * 100;
          const progressElement = document.getElementById('scroll-progress');
          if (progressElement) {
            progressElement.style.width = scrolled + '%';
          }
        });
      });
    </script>
    <script type="module" src={`${import.meta.env.BASE_URL}/assets/js/main.js`}></script>
  </body>
</html>
